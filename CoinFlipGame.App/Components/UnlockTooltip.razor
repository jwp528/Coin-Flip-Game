@using CoinFlipGame.App.Models
@using CoinFlipGame.App.Models.Unlocks

<div class="unlock-tooltip @(IsVisible ? "visible" : "")" style="@GetPositionStyle()">
    <div class="unlock-tooltip-arrow"></div>
    <div class="unlock-tooltip-content">
        <div class="unlock-tooltip-header">
            <span class="unlock-tooltip-icon">??</span>
            <span class="unlock-tooltip-title">@CoinImage?.DisplayName</span>
        </div>
        
        @if (CoinImage?.UnlockCondition != null)
        {
            <div class="unlock-tooltip-rarity @GetRarityClass()">
                @GetRarityLabel()
            </div>
            
            <div class="unlock-tooltip-description">
                @CoinImage.UnlockCondition.Description
            </div>
            
            @if (ProgressText != null)
            {
                <div class="unlock-tooltip-progress">
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" style="width: @(ProgressPercentage)%"></div>
                    </div>
                    <div class="progress-text">@ProgressText</div>
                </div>
            }
            
            @if (CoinImage.UnlockCondition.Prerequisites != null && CoinImage.UnlockCondition.Prerequisites.Any())
            {
                <div class="unlock-tooltip-prerequisites">
                    <div class="prerequisites-label">Prerequisites:</div>
                    @foreach (var prereq in CoinImage.UnlockCondition.Prerequisites)
                    {
                        <div class="prerequisite-item">
                            <span class="prerequisite-bullet">•</span>
                            <span>@prereq.Description</span>
                        </div>
                    }
                </div>
            }
        }
    </div>
</div>
