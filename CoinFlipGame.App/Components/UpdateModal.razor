@* Persistent Update Modal - Poker Table Themed *@
@if (IsVisible)
{
    <!-- Modal Backdrop -->
    <div class="modal-backdrop fade show" style="z-index: 9998;"></div>
    
    <!-- Modal -->
    <div class="modal fade show d-block" tabindex="-1" style="z-index: 9999;">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content update-modal-poker">
                <!-- Outer Wood Frame -->
                <div class="poker-frame">
                    <!-- Felt Surface -->
                    <div class="poker-felt">
                        <!-- Update Icon -->
                        <div class="update-icon mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z" />
                                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z" />
                            </svg>
                        </div>
                        
                        <!-- Content Container -->
                        <div class="content-inset mb-4">
                            <h4 class="mb-3 fw-bold">Updates Available</h4>
                            <p class="text-muted mb-0">
                                @if (!string.IsNullOrEmpty(CurrentVersion))
                                {
                                    <span>Your current version <strong>@CurrentVersion</strong> is out of date.</span>
                                }
                                else
                                {
                                    <span>A new version of the app is ready. Please update to continue using the latest features and improvements.</span>
                                }
                            </p>
                        </div>
                        
                        <!-- Update Button -->
                        <button class="btn btn-primary btn-lg w-100" @onclick="OnUpdate" disabled="@IsUpdating">
                            @if (IsUpdating)
                            {
                                <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                                <span>Updating...</span>
                            }
                            else
                            {
                                @if (!string.IsNullOrEmpty(ApiVersion))
                                {
                                    <span>Update to @ApiVersion</span>
                                }
                                else
                                {
                                    <span>Update</span>
                                }
                            }
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
